# Mind Spiral 預設設定

engine:
  data_dir: ./data                    # 資料根目錄
  llm_backend: claude_code             # local | cloud | claude_code

  # Conviction Detection
  conviction:
    min_resonance_count: 2            # 至少幾種共鳴才建立新 conviction
    similarity_threshold: 0.55        # 語意相似度門檻（0.75 太嚴致 82% singleton）
    strength_decay_days: 90           # N 天沒出現開始衰減
    identity_coverage_threshold: 0.5  # 覆蓋率超過此值升級為 identity（半數以上 frame）

  # Proactive Touch
  touch:
    morning_digest_hour: 8            # 早晨整理推送時間
    contradiction_cooldown_hours: 24  # 矛盾通知冷卻期
    weekly_report_day: sunday         # 週報推送日
    decision_followup:
      tactical_days: 14               # 戰術決策回訪天數
      strategic_days: 60              # 策略決策回訪天數
      personnel_days: 30              # 人事決策回訪天數
      backfill_cutoff_date: "2026-02-09"  # 早於此日期的歷史 trace 不進入追蹤佇列

  # Frame Clustering
  frame:
    similarity_threshold: 0.52        # trace 語義相似度門檻
    min_traces: 3                     # 至少幾個 traces 才建立 frame（從 5 降低）

  # Contradiction Detection
  contradiction:
    min_confidence: 7                 # LLM 信心分數 < 此值的矛盾判定會被過濾

  # Periodic Jobs
  schedule:
    conviction_detection: daily       # 每日跑一次
    frame_clustering: weekly          # 每週跑一次
    identity_scan: monthly            # 每月跑一次

llm:
  local:
    base_url: http://localhost:11434/v1
    model: qwen2.5:14b
    embedding_model: google/embeddinggemma-300m
  cloud:
    gateway_url: ""                   # Cloudflare AI Gateway
    model: ""
    api_key_env: CF_AIG_TOKEN
  claude_code:
    model: claude-sonnet-4-5-20250929  # Agent SDK 使用的模型
    max_concurrent: 5                  # batch_llm 並行數量

line:
  channel_access_token_env: LINE_CHANNEL_ACCESS_TOKEN
  channel_secret_env: LINE_CHANNEL_SECRET
